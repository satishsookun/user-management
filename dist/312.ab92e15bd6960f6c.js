"use strict";(self.webpackChunkuser_management=self.webpackChunkuser_management||[]).push([[312],{5312:(Se,I,d)=>{d.r(I),d.d(I,{UserModule:()=>Ae});var p=d(9808),h=d(3075),m=d(7322),f=d(7531),v=d(9291),C=d(5746),i=d(5e3),Y=d(8078),E=d(4437),N=d(9957),M=d(4107),u=d(508);function B(a,r){1&a&&(i.TgZ(0,"span",11),i._uU(1," Field required "),i.qZA())}function j(a,r){if(1&a&&(i.TgZ(0,"mat-option",12),i._uU(1),i.qZA()),2&a){const e=r.$implicit;i.Q6J("value",e),i.xp6(1),i.hij(" ",e.name," ")}}function U(a,r){1&a&&(i.TgZ(0,"span",11),i._uU(1," Field required "),i.qZA())}function L(a,r){if(1&a&&(i.TgZ(0,"mat-option",12),i._uU(1),i.qZA()),2&a){const e=r.$implicit;i.Q6J("value",e),i.xp6(1),i.hij(" ",e.name," ")}}function H(a,r){1&a&&(i.TgZ(0,"span",11),i._uU(1," Field required "),i.qZA())}const A=function(a){return{"input-error":a}};let $=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=i.Xpm({type:a,selectors:[["app-user-profile"]],inputs:{createUser:"createUser",isSubmitted:"isSubmitted",departments:"departments",jobTitles:"jobTitles"},decls:23,vars:15,consts:[[3,"formGroup"],[1,"input-group","dark-theme"],[1,"input-wrapper","input-wrapper--fluid"],["appearance","fill",3,"ngClass"],["matInput","","formControlName","name","type","text"],["class","error",4,"ngIf"],[1,"input-wrapper","mr-15"],["formControlName","department"],[3,"value",4,"ngFor","ngForOf"],[1,"input-wrapper","ml-15"],["formControlName","jobTitle"],[1,"error"],[3,"value"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),i._uU(5,"Full name"),i.qZA(),i._UZ(6,"input",4),i.qZA(),i.YNc(7,B,2,0,"span",5),i.qZA()(),i.TgZ(8,"div",1)(9,"div",6)(10,"mat-form-field",3)(11,"mat-label"),i._uU(12,"Your Department"),i.qZA(),i.TgZ(13,"mat-select",7),i.YNc(14,j,2,2,"mat-option",8),i.qZA()(),i.YNc(15,U,2,0,"span",5),i.qZA(),i.TgZ(16,"div",9)(17,"mat-form-field",3)(18,"mat-label"),i._uU(19,"Your Title"),i.qZA(),i.TgZ(20,"mat-select",10),i.YNc(21,L,2,2,"mat-option",8),i.qZA()(),i.YNc(22,H,2,0,"span",5),i.qZA()()()),2&e&&(i.Q6J("formGroup",t.createUser),i.xp6(3),i.Q6J("ngClass",i.VKq(9,A,t.isSubmitted&&t.createUser.get("name").invalid)),i.xp6(4),i.Q6J("ngIf",t.isSubmitted&&t.createUser.get("name").invalid),i.xp6(3),i.Q6J("ngClass",i.VKq(11,A,t.isSubmitted&&t.createUser.get("department").invalid)),i.xp6(4),i.Q6J("ngForOf",t.departments),i.xp6(1),i.Q6J("ngIf",t.isSubmitted&&t.createUser.get("department").invalid),i.xp6(2),i.Q6J("ngClass",i.VKq(13,A,t.isSubmitted&&t.createUser.get("jobTitle").invalid)),i.xp6(4),i.Q6J("ngForOf",t.jobTitles),i.xp6(1),i.Q6J("ngIf",t.isSubmitted&&t.createUser.get("jobTitle").invalid))},directives:[h.JL,h.sg,m.KE,p.mk,m.hX,f.Nt,h.Fj,h.JJ,h.u,p.O5,M.gD,p.sg,u.ey],encapsulation:2}),a})();var w=d(8099);function z(a,r){if(1&a&&(i.TgZ(0,"div"),i._uU(1),i.qZA()),2&a){const e=i.oxw();i.xp6(1),i.hij("Uploaded File: ",e.uploadedFileName,"")}}function G(a,r){1&a&&(i.TgZ(0,"p",9),i._uU(1," Please enter the correct format. Ex: jpg, jpeg, png.\n"),i.qZA())}let Z=(()=>{class a{constructor(){this.emitUploadFile=new i.vpe}onAddFiles(e){this.emitUploadFile.emit(e)}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=i.Xpm({type:a,selectors:[["app-user-upload"]],inputs:{createUser:"createUser",isSubmitted:"isSubmitted",acceptedFormat:"acceptedFormat",uploadedFileName:"uploadedFileName",departments:"departments",jobTitles:"jobTitles"},outputs:{emitUploadFile:"emitUploadFile"},decls:15,vars:3,consts:[["id","dropFileForm",1,"dropFileForm"],[1,"upload"],["for","profileUpload",1,"upload__wrapper","mt-10"],[1,"upload__card"],[1,"upload__btn"],["type","file","name","files[]","id","profileUpload",1,"fileInput","upload__drag-zone",3,"accept","change"],[1,"uploaded-img"],[4,"ngIf"],["class","form-hint-error",4,"ngIf"],[1,"form-hint-error"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"div",1)(2,"label"),i._uU(3," Upload profile "),i.qZA(),i.TgZ(4,"div",2)(5,"div",3)(6,"button",4)(7,"mat-icon"),i._uU(8,"add"),i.qZA(),i.TgZ(9,"input",5),i.NdJ("change",function(s){return t.onAddFiles(s)}),i.qZA()()()()(),i.TgZ(10,"div",6)(11,"mat-icon"),i._uU(12,"person"),i.qZA(),i.YNc(13,z,2,1,"div",7),i.qZA()(),i.YNc(14,G,2,0,"p",8)),2&e&&(i.xp6(9),i.Q6J("accept",t.acceptedFormat),i.xp6(4),i.Q6J("ngIf",t.uploadedFileName),i.xp6(1),i.Q6J("ngIf",!t.acceptedFormat))},directives:[w.Hw,p.O5],encapsulation:2}),a})();function Q(a,r){if(1&a){const e=i.EpF();i.TgZ(0,"button",9),i.NdJ("click",function(){return i.CHM(e),i.oxw().onCreate()}),i._uU(1," Create "),i.qZA()}}function K(a,r){if(1&a){const e=i.EpF();i.TgZ(0,"button",9),i.NdJ("click",function(){return i.CHM(e),i.oxw().onEdit()}),i._uU(1," Save "),i.qZA()}}let R=(()=>{class a{constructor(e,t,n,s,o,l){this._fb=e,this._router=t,this._routingService=n,this._changeRef=s,this._usersStore=o,this._breadcrumbService=l,this.isSubmitted=!1,this.acceptedFormat=".png, .jpg, .jpeg, .svg",this.departments=C.B,this.jobTitles=C.N,this.jobTitlesOrigin=C.N}ngOnInit(){this._users=[],this.setupForm(),this.handleModuleByRouting(),this.handleInterfaceTitle(),this.onDepartmentValueChange(),this._breadcrumbService.set("@edit",`${this._userId}: edit`)}ngOnDestroy(){this._userStoreSubscription&&this._userStoreSubscription.unsubscribe(),this._formSubscription&&this._formSubscription.unsubscribe(),this._saveSubs&&this._saveSubs.unsubscribe(),this._routingSubscription&&this._routingSubscription.unsubscribe()}setupForm(){this.createUser=this._fb.group({id:[""],name:["",[h.kI.required]],department:["",[h.kI.required]],jobTitle:["",[h.kI.required]],profile:[""],progress:[""]})}handleInterfaceTitle(){this.title=this.isEditInterface?"Edit event":"Create an event"}handleModuleByRouting(){this._routingSubscription=this._routingService.currentUrl$().subscribe(e=>{this.isEditInterface=e.split("/").indexOf("edit")>-1,this.manageEditUserModule(e)})}manageEditUserModule(e){if(this.isEditInterface){const t=e.split("/");this._userId=JSON.parse(t[2]),this.initEditedUserInfo()}}initEditedUserInfo(){this._userStoreSubscription=this._usersStore.usersStore$().subscribe(e=>{this._users=e,e.forEach(t=>{t.id===this._userId&&this.createUser.patchValue(t)})})}addFiles(e){if(e.target.files.length>0){this.hasUploadedFile=!0;const t=e.target.files||e.dataTransfer.files;this.acceptedFormat&&(this.createUser.get("profile").setValue(t[0].name),this.uploadedFileName=t[0].name),this._changeRef.markForCheck()}}onCreate(){this.isSubmitted=!0,this.createUser.valid&&(this.createUser.get("id").setValue(this.generateId(3)),this.createUser.get("progress").setValue(Math.round(100*Math.random()).toString()),this._usersStore.dispatchAddedUser(this.createUser.value),this._router.navigate(["users"]))}generateId(e){const s=JSON.stringify(Math.random()*e).split(".").join("").substring(1,2);return JSON.parse(s)}onDepartmentValueChange(){this._formSubscription=this.createUser.get("department").valueChanges.subscribe(e=>{this.jobTitles=this.filterOccupationListByDept(e.slug),this.createUser.get("jobTitle").setValue("")})}filterOccupationListByDept(e){return[...this.jobTitlesOrigin.filter(t=>t.slug===e)]}onEdit(){this._usersStore.dispatchEditedUser(this.createUser.value),this._router.navigate(["users"])}}return a.\u0275fac=function(e){return new(e||a)(i.Y36(h.qu),i.Y36(v.F0),i.Y36(Y.Z),i.Y36(i.sBO),i.Y36(E.w),i.Y36(N.pm))},a.\u0275cmp=i.Xpm({type:a,selectors:[["app-add-edit-user"]],decls:12,vars:12,consts:[[1,"user"],[1,"user__content"],[3,"formGroup"],[1,"user__section","mr-25"],[3,"createUser","isSubmitted","departments","jobTitles"],[1,"user__section","dark-theme","ml-25","mr-50"],[3,"createUser","isSubmitted","acceptedFormat","uploadedFileName","emitUploadFile"],[1,"user__cta"],["type","button","class","btn btn--primary",3,"click",4,"ngIf"],["type","button",1,"btn","btn--primary",3,"click"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0)(1,"h2"),i._uU(2),i.qZA(),i.TgZ(3,"div",1)(4,"form",2)(5,"div",3),i._UZ(6,"app-user-profile",4),i.qZA(),i.TgZ(7,"div",5)(8,"app-user-upload",6),i.NdJ("emitUploadFile",function(s){return t.addFiles(s)}),i.qZA()()(),i.TgZ(9,"div",7),i.YNc(10,Q,2,0,"button",8),i.YNc(11,K,2,0,"button",8),i.qZA()()()),2&e&&(i.xp6(2),i.Oqu(t.title),i.xp6(2),i.Q6J("formGroup",t.createUser),i.xp6(2),i.Q6J("createUser",t.createUser)("isSubmitted",t.isSubmitted)("departments",t.departments)("jobTitles",t.jobTitles),i.xp6(2),i.Q6J("createUser",t.createUser)("isSubmitted",t.isSubmitted)("acceptedFormat",t.acceptedFormat)("uploadedFileName",t.uploadedFileName),i.xp6(2),i.Q6J("ngIf",!t.isEditInterface),i.xp6(1),i.Q6J("ngIf",t.isEditInterface))},directives:[h._Y,h.JL,h.sg,$,Z,p.O5],encapsulation:2}),a})();const q=[{path:"",redirectTo:"create",pathMatch:"full"},{path:"create",component:R,data:{alias:"create"}},{path:":id/edit",component:R,data:{alias:"edit"}}];let W=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=i.oAB({type:a}),a.\u0275inj=i.cJS({imports:[[v.Bz.forChild(q)],v.Bz]}),a})();var J=d(5664),V=d(9776),X=d(7429),ee=d(7423),te=d(9167),x=d(7579);d(727),d(1159),d(3191),d(1777);let pe=(()=>{class a{constructor(){this.changes=new x.x,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(e,t){return`${e} \u2013 ${t}`}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275prov=i.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const ge={provide:new i.OlP("mat-datepicker-scroll-strategy"),deps:[V.aV],useFactory:function me(a){return()=>a.scrollStrategies.reposition()}};let O=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=i.oAB({type:a}),a.\u0275inj=i.cJS({providers:[pe,ge],imports:[[p.ez,ee.ot,V.U8,J.rt,X.eL,u.BQ],te.ZD]}),a})(),be=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=i.oAB({type:a}),a.\u0275inj=i.cJS({providers:[],imports:[[p.ez,h.u5,h.UX,m.lN,f.c,O,M.LD,w.Ps]]}),a})();var Ce=d(5620),Me=d(8635);let Ae=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=i.oAB({type:a}),a.\u0275inj=i.cJS({providers:[E.w],imports:[[p.ez,v.Bz,h.u5,h.UX,W,m.lN,f.c,O,M.LD,w.Ps,Ce.Aw.forFeature("usersFeature",Me.c),be]]}),a})()}}]);